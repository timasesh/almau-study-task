<<<<<<< HEAD
=======
{% load static %}
{% load math_filters %}

>>>>>>> 183dfa0248c37f3942309b11103b72706fcd0bd0
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Результаты квиза</title>
<<<<<<< HEAD
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f8f9fa;
        }
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding-right: 4px;
            margin-left: 30px;
        }
        .header-logo-stretch {
            height: 150px;
            width: auto;
            object-fit: contain;
            background: transparent;
            align-self: center;
        }
        .header-flex-row {
            display: flex;
            align-items: stretch;
        }
        .quiz-header {
            background: linear-gradient(90deg, #1e88e5, #e53935);
            padding: 2rem 0 1rem 0;
            color: #fff;
            box-shadow: 0 4px 16px rgba(30, 136, 229, 0.13);
            margin-bottom: 2rem;
        }
        .progress-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: #f8f9fa;
            border: 10px solid #e9ecef;
        }
        .progress-circle.passed {
            border-color: #28a745;
        }
        .progress-circle.failed {
            border-color: #dc3545;
        }
        .progress-circle-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #495057;
        }
        .quiz-details .card {
            transition: transform 0.2s;
        }
        .quiz-details .card:hover {
            transform: translateY(-5px);
        }
        .btn {
            padding: 0.5rem 1.5rem;
            font-weight: 500;
        }
        .alert {
            border-radius: 10px;
=======
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&family=Raleway:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <style>
        .quiz-header {
            background: linear-gradient(90deg, #1e88e5, #e53935);
            color: #fff;
            padding: 2.2rem 0 1.2rem 0;
            margin-bottom: 2.2rem;
            box-shadow: 0 4px 16px rgba(30,136,229,0.13);
            min-height: 110px;
            display: flex;
            align-items: center;
        }
        .quiz-header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 2rem;
            width: 100%;
        }
        .quiz-header-title {
            font-size: 2.1rem;
            font-weight: 800;
            letter-spacing: 0.01em;
            color: #fff;
            text-shadow: 0 2px 8px rgba(30,136,229,0.13);
        }
        .quiz-header-btns {
            display: flex;
            gap: 1rem;
            align-items: center;
            height: 100%;
        }
        .btn-logout.btn-logout-large {
            background: #e53935;
            color: #fff;
            border: none;
            border-radius: 40px;
            font-size: 0.7 rem;
            font-weight: 700;
            padding: 0.9rem 2.5rem;
            box-shadow: 0 2px 12px rgba(229,57,53,0.13);
            transition: all 0.18s;
            display: inline-flex;
            align-items: center;
            gap: 0.7rem;
        }
        .btn-logout.btn-logout-large:hover, .btn-logout.btn-logout-large:focus {
            background: #c62828;
            color: #fff;
            transform: translateY(-2px) scale(1.04);
            box-shadow: 0 4px 18px rgba(229,57,53,0.18);
        }
        @media (max-width: 700px) {
            .quiz-header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            .quiz-header-title {
                font-size: 1.3rem;
            }
        }
        .progress-circle-animated {
            position: relative;
            width: 160px;
            height: 160px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.2rem auto;
        }
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-ring-bg {
            stroke: #e3f2fd;
        }
        .progress-ring-bar {
            stroke: #1e88e5;
            stroke-width: 16;
            stroke-linecap: round;
            transition: stroke-dashoffset 1.2s cubic-bezier(.77,0,.18,1);
        }
        .progress-circle-value-animated {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.7rem;
            font-weight: 700;
            color: #222;
            letter-spacing: 0.01em;
            pointer-events: none;
>>>>>>> 183dfa0248c37f3942309b11103b72706fcd0bd0
        }
    </style>
</head>
<body>
<<<<<<< HEAD
    
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow-lg border-0 rounded-lg">
                    <div class="card-header bg-primary text-white text-center py-4">
                        <h3 class="mb-0">Результаты квиза "{{ quiz.title }}"</h3>
                    </div>
                    <div class="card-body p-5">
                        {% if result %}
                            <div class="text-center mb-4">
                                <div class="progress-circle {% if result.passed %}passed{% else %}failed{% endif %} mx-auto mb-4">
                                    <span class="progress-circle-value">{{ percent }}%</span>
                                </div>
                                <h4 class="mb-3">
                                    {% if result.passed %}
                                        <span class="text-success">Поздравляем! Вы прошли квиз!</span>
                                    {% else %}
                                        <span class="text-danger">Квиз не пройден</span>
                                    {% endif %}
                                </h4>
                                <p class="text-muted">Попытка #{{ result.attempt_number }}</p>
=======
<header class="quiz-header">
    <div class="container quiz-header-content">
        <div class="quiz-header-title">Результаты квиза: {{ quiz.title }}</div>
        <div class="quiz-header-btns">
            <a href="{% url 'course_detail' course.id %}" class="btn btn-profile"><i class="fas fa-arrow-left mr-1"></i>Назад к курсу</a>
            <a href="{% url 'logout' %}" class="btn btn-logout btn-logout-large"><i class="fas fa-sign-out-alt"></i> Выйти</a>
        </div>
    </div>
</header>
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg border-0 rounded-lg">
                <div class="text-center py-4">
                    <h3 class="mb-0" style="font-weight:700;letter-spacing:0.01em;color:#1976d2;">Результаты квиза "{{ quiz.title }}"</h3>
                </div>
                <div class="card-body p-5 bg-light">
                    {% if result %}
                        <div class="text-center mb-4">
                            <div class="progress-circle-animated mx-auto mb-4">
                                <svg class="progress-ring" width="160" height="160">
                                    <circle class="progress-ring-bg" cx="80" cy="80" r="70" fill="none" stroke="#e3f2fd" stroke-width="16"/>
                                    <circle class="progress-ring-bar" cx="80" cy="80" r="70" fill="none" stroke="#1e88e5" stroke-width="16" stroke-linecap="round"/>
                                </svg>
                                <span class="progress-circle-value-animated" id="quiz-percent-value">{{ percent }}%</span>
>>>>>>> 183dfa0248c37f3942309b11103b72706fcd0bd0
                            </div>

<<<<<<< HEAD
                            <div class="quiz-details">
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <div class="card bg-light">
                                            <div class="card-body">
                                                <h5 class="card-title">Детали попытки</h5>
                                                <p class="mb-1"><strong>Дата:</strong> {{ result.created_at|date:"d.m.Y H:i" }}</p>
                                                <p class="mb-1"><strong>Результат:</strong> {{ result.score }}%</p>
                                                {% if result.stars_penalty > 0 %}
                                                    <p class="mb-1 text-danger"><strong>Штраф:</strong> -{{ result.stars_penalty }} звёзд</p>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    {% if show_stars_notification %}
                                    <div class="col-md-6">
                                        <div class="card bg-success text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">Награда</h5>
                                                <p class="mb-0">Вы получили {{ stars_awarded }} звёзд за успешное прохождение квиза!</p>
                                            </div>
=======
                        <div class="quiz-details">
                            <div class="row mb-4">
                                <div class="col-md-6 mb-3 mb-md-0">
                                    <div class="card quiz-detail-card">
                                        <div class="card-body">
                                            <h5 class="card-title">Детали попытки</h5>
                                            <p class="mb-1"><strong>Дата:</strong> {{ result.created_at|date:"d.m.Y H:i" }}</p>
                                            <p class="mb-1"><strong>Результат:</strong> {{ result.score }}%</p>
                                            {% if result.stars_penalty > 0 %}
                                                <p class="mb-1 text-danger"><strong>Штраф:</strong> -{{ result.stars_penalty }} звёзд</p>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% if show_stars_notification %}
                                <div class="col-md-6">
                                    <div class="card quiz-reward-card">
                                        <div class="card-body">
                                            <h5 class="card-title">Награда</h5>
                                            <p class="mb-0">Вы получили {{ stars_awarded }} звёзд за успешное прохождение квиза!</p>
>>>>>>> 183dfa0248c37f3942309b11103b72706fcd0bd0
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>

                            {% if not result.passed %}
                                <div class="alert alert-warning">
                                    <h5 class="alert-heading">Не сдано</h5>
                                    <p class="mb-0">Для успешного прохождения квиза необходимо набрать 70% или более. Попробуйте ещё раз!</p>
                                </div>
                            {% endif %}

                            <div class="text-center mt-4">
                                {% if course %}
                                    <a href="{% url 'course_detail' course.id %}" class="btn btn-primary me-2">
                                        <i class="fas fa-arrow-left me-2"></i>Вернуться к курсу
                                    </a>
                                {% endif %}
                                {% if not result.passed %}
                                    <a href="{% url 'start_quiz' quiz.id %}" class="btn btn-warning">
                                        <i class="fas fa-redo me-2"></i>Попробовать снова
                                    </a>
                                {% endif %}
                            </div>
<<<<<<< HEAD
                        {% else %}
                            <div class="alert alert-info">
                                <h5 class="alert-heading">Нет результатов</h5>
                                <p class="mb-0">У вас пока нет попыток прохождения этого квиза.</p>
                            </div>
                            <div class="text-center mt-4">
                                <a href="{% url 'start_quiz' quiz.id %}" class="btn btn-primary">
                                    <i class="fas fa-play me-2"></i>Начать квиз
                                </a>
                            </div>
                        {% endif %}
                    </div>
=======
                        </div>

                        {% if not result.passed %}
                            <div class="alert alert-warning rounded-3">
                                <h5 class="alert-heading">Не сдано</h5>
                                <p class="mb-0">Для успешного прохождения квиза необходимо набрать 70% или более. Попробуйте ещё раз!</p>
                            </div>
                        {% endif %}

                        <div class="text-center mt-4">
                            {% if course %}
                                <a href="{% url 'course_detail' course.id %}" class="btn btn-modern btn-profile me-2">
                                    <i class="fas fa-arrow-left me-2"></i>Вернуться к курсу
                                </a>
                            {% endif %}
                            {% if not result.passed %}
                                <a href="{% url 'start_quiz' quiz.id %}" class="btn btn-modern btn-secondary">
                                    <i class="fas fa-redo me-2"></i>Попробовать снова
                                </a>
                            {% endif %}
                        </div>
                    {% else %}
                        <div class="alert alert-info rounded-3">
                            <h5 class="alert-heading">Нет результатов</h5>
                            <p class="mb-0">У вас пока нет попыток прохождения этого квиза.</p>
                        </div>
                        <div class="text-center mt-4">
                            <a href="{% url 'start_quiz' quiz.id %}" class="btn btn-modern btn-profile">
                                <i class="fas fa-play me-2"></i>Начать квиз
                            </a>
                        </div>
                    {% endif %}
>>>>>>> 183dfa0248c37f3942309b11103b72706fcd0bd0
                </div>
            </div>
        </div>
    </div>
<<<<<<< HEAD
    <footer class="bg-light py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">&copy; 2024 Study Task. Все права защищены.</p>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
=======
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var percent = {{ percent|default:0 }};
    var circle = document.querySelector('.progress-ring-bar');
    var radius = circle.r.baseVal.value;
    var circumference = 2 * Math.PI * radius;
    circle.style.strokeDasharray = `${circumference}`;
    circle.style.strokeDashoffset = `${circumference}`;
    setTimeout(function() {
        var offset = circumference - percent / 100 * circumference;
        circle.style.transition = 'stroke-dashoffset 1.2s cubic-bezier(.77,0,.18,1)';
        circle.style.strokeDashoffset = offset;
    }, 200);
});
</script>
>>>>>>> 183dfa0248c37f3942309b11103b72706fcd0bd0
</body>
</html>
